import{_ as w,h as B,G as I,N as L,e as g,j as V,P as E,r as P,o as p,d as U,u as d,c as f,a as y,C as j,b as l,F as A,s as F,q as H,x as q,t,$ as M,E as h,H as x}from"./index.dd783b7f.js";import{g as z}from"./_api.7a0ec99c.js";import{D as G}from"./DescHeader.4adbc56d.js";import{S as O}from"./SongWithInfo.759bed31.js";import"./Songs.01b6ff99.js";const W={key:1,class:"playlistdetail",id:"top"},J={class:"count"},K={class:"link"},Q={class:"link"},X={class:"link"},Z={class:"songs"},ee=["onClick"],se={__name:"playlistdetail",setup(ae){const $=B(),R=I(()=>$.state.sound.current_id),b=L(),a=g({}),c=g([]),v=g(!1),k=()=>{v.value=!0,a.value=[],c.value=[];const s=b.params.id;!s||z({id:s}).then(i=>{const{playlist:o}=i;a.value=o;const m=o==null?void 0:o.trackIds.map(r=>r.id).toString();H({ids:m}).then(({songs:r})=>{if(r){c.value=r,v.value=!1;const u=document.getElementById("top");u&&u.scrollIntoView({behavior:"smooth",block:"start"})}})})},T=s=>{if(!s)return"";const i=`${Math.floor(s/60%60)}`.padStart(2,"0"),o=`${Math.floor(s%60)}`.padStart(2,"0");return`${i}:${o}`},S=s=>{$.dispatch("fetch_song_data",s)};return V(()=>{k()}),E(()=>b.params.id,()=>{k()}),(s,i)=>{var m,r,u,C;const o=P("svg-icon");return v.value?(p(),U(d(q),{key:0,style:{margin:"3%"},width:"74%",height:"70vh",animated:"",bg:"transparent"})):(p(),f("div",W,[y(d(G),{image:(m=a.value)==null?void 0:m.coverImgUrl,name:(r=a.value)==null?void 0:r.name,description:(u=a.value)==null?void 0:u.description,showActions:Boolean((C=c.value[0])==null?void 0:C.id),onOnPlay:i[0]||(i[0]=e=>{var n;return S((n=c.value[0])==null?void 0:n.id)})},{tracks:j(()=>{var e,n,_,D,N,Y;return[l("div",null,[l("div",null,t(`${s.$t("searchResult.lastUpdate")}\xA0${d(M)((e=a.value)==null?void 0:e.updateTime).format("YYYY/MM/DD")}`)+" \xB7 "+t(`${(n=a.value)==null?void 0:n.trackCount} ${s.$t("searchResult.songsTips")}`),1),l("div",J,[l("span",null,[y(o,{class:"icon","icon-class":"play"}),h(" "+t(Number((_=a.value)==null?void 0:_.playCount).toLocaleString())+"\xA0"+t(s.$t("searchResult.plays")),1)]),h(" \xB7 "),l("span",K,t(Number((D=a.value)==null?void 0:D.subscribedCount).toLocaleString())+"\xA0"+t(s.$t("searchResult.subscribed")),1),h(" \xB7 "),l("span",Q,t(Number((N=a.value)==null?void 0:N.shareCount).toLocaleString())+"\xA0"+t(s.$t("searchResult.shares")),1),h(" \xB7 "),l("span",X,t(Number((Y=a.value)==null?void 0:Y.commentCount).toLocaleString())+"\xA0"+t(s.$t("searchResult.comments")),1)])])]}),_:1},8,["image","name","description","showActions"]),l("ul",Z,[(p(!0),f(A,null,F(c.value,e=>{var n;return p(),f("li",{class:x(["track",{active:e.id===R.value}]),onClick:_=>S(e.id),key:e.id},[y(d(O),{image:(n=e==null?void 0:e.al)==null?void 0:n.picUrl,name:e==null?void 0:e.name,subtitle:`${e.alia?e.alia.toString():""} ${e.tns?e.tns.toString():""}`,id:e==null?void 0:e.id,desc:e==null?void 0:e.ar,publishTime:e.publishTime?d(M)(e.publishTime).format("YYYY\u5E74MM\u6708DD\u65E5"):e.name,duration:T(e.dt/1e3)},null,8,["image","name","subtitle","id","desc","publishTime","duration"])],10,ee)}),128))])]))}}};var ie=w(se,[["__scopeId","data-v-2c30418e"]]);export{ie as default};
