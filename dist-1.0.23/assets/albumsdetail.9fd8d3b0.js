import{_ as N,Z as V,h as A,G as F,N as z,e as k,P as L,o,d as y,u as n,x as H,c as p,a as x,C as h,b as s,F as B,s as C,t as u,L as U,E as v,$ as Y,Y as j,J as q,H as G,z as J,A as P,q as R}from"./index.dd783b7f.js";import{a as W}from"./_api.7a0ec99c.js";import{D as Z}from"./DescHeader.4adbc56d.js";import{S as K}from"./SongWithInfo.759bed31.js";import"./Songs.01b6ff99.js";const O=d=>(J("data-v-40cd223e"),d=d(),P(),d),Q={key:1,class:"albumsdetail"},X={class:""},ee={class:"count"},ae={class:"link"},se={class:"link"},te=O(()=>s("br",null,null,-1)),oe={class:"action"},ne={class:"songs",name:"songs",id:"songs"},le=["onClick"],ue=V({__name:"albumsdetail",setup(d){const S=A(),T=F(()=>S.state.sound.current_id),E=z(),a=k({}),g=k([]),c=k(!0),I=()=>{const t=E.params.id;c.value=!0,W({id:t}).then(m=>{const{album:l,songs:r}=m;if(a.value=l,!r)return;const _=r.map(e=>e.id).toString();R({ids:_}).then(({songs:e})=>{c.value=!1,g.value=e}).catch(()=>{c.value=!1})}).catch(()=>{c.value=!1})},M=t=>{if(!t)return"";const m=`${Math.floor(t/60%60)}`.padStart(2,"0"),l=`${Math.floor(t%60)}`.padStart(2,"0");return`${m}:${l}`},$=t=>{S.dispatch("fetch_song_data",t)};L(()=>E.params.id,()=>{I()},{immediate:!0});const w=()=>{document.getElementById("songs").scrollIntoView({behavior:"smooth",block:"start"})};return(t,m)=>{var l,r,_;return c.value?(o(),y(n(H),{key:0,style:{margin:"3%"},width:"74%",height:"70vh",animated:"",bg:"transparent"})):(o(),p("div",Q,[x(n(Z),{image:(l=a.value)==null?void 0:l.picUrl,name:(r=a.value)==null?void 0:r.name,description:(_=a.value)==null?void 0:_.description},{tracks:h(()=>{var e,i,f,D;return[s("div",null,[s("div",X,[(o(!0),p(B,null,C(a.value.artists,b=>(o(),y(n(U),{class:"link",to:`/artists/${b.id}`,key:b.id},{default:h(()=>[s("strong",null,u(b.name),1)]),_:2},1032,["to"]))),128)),v(" "+u(`\u53D1\u5E03\u4E8E${n(Y)((e=a.value)==null?void 0:e.publishTime).format("YYYY\u5E74MM\u6708DD\u65E5")}`)+" \xB7 ",1),s("span",{onClick:w},u(`${(i=a.value)==null?void 0:i.size}\u9996\u97F3\u4E50`),1)]),s("div",ee,[v(u(!a.value.onSale&&"\u4E0D")+"\u63D0\u4F9B\u552E\u5356 ",1),s("span",ae,u(a.value.company&&` \xB7 ${(f=a.value)==null?void 0:f.company}`),1),s("span",se,u(a.value.subType&&` \xB7 ${(D=a.value)==null?void 0:D.subType}`),1)])])]}),action:h(()=>{var e;return[te,s("div",oe,[Boolean((e=g.value[0])==null?void 0:e.id)?(o(),y(n(j),{key:0,onClick:$,"icon-class":"play"},{default:h(()=>[v("\u64AD\u653E")]),_:1})):q("",!0),v("\xA0 ")])]}),_:1},8,["image","name","description"]),s("ul",ne,[(o(!0),p(B,null,C(g.value,e=>{var i;return o(),p("li",{class:G(["track",{active:e.id===T.value}]),onClick:f=>$(e.id),key:e.id},[x(n(K),{image:(i=e==null?void 0:e.al)==null?void 0:i.picUrl,name:e==null?void 0:e.name,subtitle:`${e.alia?e.alia.toString():""} ${e.tns?e.tns.toString():""}`,id:e==null?void 0:e.id,desc:e==null?void 0:e.ar,publishTime:e.publishTime?n(Y)(e.publishTime).format("YYYY\u5E74MM\u6708DD\u65E5"):e.name,duration:M(e.dt/1e3)},null,8,["image","name","subtitle","id","desc","publishTime","duration"])],10,le)}),128))])]))}}});var _e=N(ue,[["__scopeId","data-v-40cd223e"]]);export{_e as default};
