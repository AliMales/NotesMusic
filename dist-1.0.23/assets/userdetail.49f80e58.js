import{_ as E,h as P,G as R,N as A,e as $,P as F,r as H,o as h,d as B,u as n,c as C,a as M,C as L,b as s,F as j,s as q,x as z,t as a,$ as T,E as k,y as f,H as G,I as J,J as K,K as x,q as O}from"./index.dd783b7f.js";import{g as Q}from"./_api.7a0ec99c.js";import{D as W}from"./DescHeader.4adbc56d.js";const X={key:1,class:"wapper",id:"top"},Z={class:"count"},ee={class:"link"},se={class:"link"},ae={class:"link"},te={class:"songs"},oe=["onClick"],ne={class:"index"},le={class:"title"},re=["title"],ce=["title"],ie=["title"],de={class:"publishTime"},ue={class:"time"},_e={__name:"userdetail",setup(me){const S=P(),N=R(()=>S.state.sound.current_id),b=A(),t=$({}),d=$([]),y=$(!1),U=()=>{y.value=!0,t.value=[],d.value=[];const o=b.params.id;Q({id:o}).then(c=>{const{playlist:l}=c;t.value=l;const g=l==null?void 0:l.trackIds.map(i=>i.id).toString();O({ids:g}).then(({songs:i})=>{d.value=i,y.value=!1;const u=document.getElementById("top");u&&u.scrollIntoView({behavior:"smooth",block:"start"})})})},V=o=>{if(!o)return"";const c=`${Math.floor(o/60%60)}`.padStart(2,"0"),l=`${Math.floor(o%60)}`.padStart(2,"0");return`${c}:${l}`},D=o=>{S.dispatch("fetch_song_data",o)};return F(()=>b.params.id,()=>{U()},{immediate:!0}),(o,c)=>{var g,i,u,I;const l=H("svg-icon");return y.value?(h(),B(n(z),{key:0,style:{margin:"3%"},width:"74%",height:"70vh",animated:"",bg:"transparent"})):(h(),C("div",X,[M(n(W),{image:(g=t.value)==null?void 0:g.coverImgUrl,name:(i=t.value)==null?void 0:i.name,description:(u=t.value)==null?void 0:u.description,tracks:o.tracks,showActions:Boolean((I=d.value[0])==null?void 0:I.id),onOnPlay:c[0]||(c[0]=e=>{var r;return D((r=d.value[0])==null?void 0:r.id)})},{tracks:L(()=>{var e,r,_,m,p,v;return[s("div",null,[s("div",null,a(`${o.$t("searchResult.lastUpdate")}\xA0${n(T)((e=t.value)==null?void 0:e.updateTime).format("YYYY/MM/DD/")}`)+" \xB7 "+a(`${(r=t.value)==null?void 0:r.trackCount}${o.$t("searchResult.songsTips")}`),1),s("div",Z,[s("span",null,[M(l,{class:"icon","icon-class":"play"}),k(" "+a(n(f)((_=t.value)==null?void 0:_.playCount))+"\u6B21\u64AD\u653E ",1)]),k(" \xB7 "),s("span",ee,a(n(f)((m=t.value)==null?void 0:m.subscribedCount))+"\u4EBA\u8BA2\u9605 ",1),k(" \xB7 "),s("span",se,a(n(f)((p=t.value)==null?void 0:p.shareCount))+"\u6B21\u5206\u4EAB ",1),k(" \xB7 "),s("span",ae,a(n(f)((v=t.value)==null?void 0:v.commentCount))+"\u6761\u7559\u8A00 ",1)])])]}),_:1},8,["image","name","description","tracks","showActions"]),s("ul",te,[(h(!0),C(j,null,q(d.value,(e,r)=>{var _,m,p,v,Y,w;return h(),C("li",{class:G(["track",{active:e.id===N.value}]),onClick:pe=>D(e.id),key:e.id},[s("div",ne,a(r+1),1),s("div",null,[(_=e==null?void 0:e.al)!=null&&_.picUrl?(h(),B(n(J),{key:0,class:"pic",animate:"animate__fadeInUp",src:((m=e==null?void 0:e.al)==null?void 0:m.picUrl)||""},null,8,["src"])):K("",!0)]),s("div",null,[s("div",le,[s("strong",{title:e.name},a(e.name),9,re),s("span",{title:(p=e==null?void 0:e.alia)!=null&&p.toString()?`(${(v=e==null?void 0:e.alia)==null?void 0:v.toString()})`:""},a((Y=e==null?void 0:e.alia)!=null&&Y.toString()?`(${(w=e==null?void 0:e.alia)==null?void 0:w.toString()})`:""),9,ce)]),s("div",{class:"title ar",title:n(x)(e.ar)},a(n(x)(e.ar)),9,ie)]),s("div",de,a(e.publishTime?n(T)(e.publishTime).format("YYYY\u5E74MM\u6708DD\u65E5"):e.name),1),s("div",ue,a(V(e.dt)),1)],10,oe)}),128))])]))}}};var ke=E(_e,[["__scopeId","data-v-640bbf16"]]);export{ke as default};
