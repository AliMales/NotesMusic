import{_ as I,a9 as $,h as k,a4 as C,O as S,o as B,c as E,b as o,a,C as c,u as n,t as l,w as g,a6 as p,n as N,a8 as V,ab as T,I as q,L as x,E as m,Y as h,z,A as L}from"./index.dd783b7f.js";const u=i=>(z("data-v-afa2d2ac"),i=i(),L(),i),P={class:"login"},U={class:"contant"},A={class:"card"},D=u(()=>o("br",null,null,-1)),O=u(()=>o("br",null,null,-1)),R={class:"label"},j={class:"cell"},M=["placeholder"],Y=u(()=>o("br",null,null,-1)),F={class:"label"},G=["placeholder"],H={class:"login-signin"},J={__name:"login",setup(i){const r=$(),f=k(),b=C(),e=S({email:"huibikuile@qq.com",code:"",tips:r.t("login.sendCode"),is_send:!1,loading:!1,sumbiting:!1}),v=()=>{({}).IS_ELECTRON||(window.location.href="http://signup.tigerzh.com/?appname=music")},y=()=>{e.code&&e.email&&(e.sumbiting=!0,V({email:e.email,code:e.code,function:"loginByEmail"}).then(s=>{e.sumbiting=!1,s.userInfo&&(f.commit("update_userinfo",s.userInfo),b.push("/"))}).catch(s=>{throw e.is_send&&(e.tips="0s",e.is_send=!1,e.code=""),e.sumbiting=!1,s}))},_=()=>{let[s]=e.tips.split("s");s=Number(s),s=s-1,e.tips=`${s}s`,s<=0?(e.tips=r.t("login.sendAgain"),e.is_send=!1):setTimeout(()=>{_()},1e3)},w=()=>{e.is_send||(e.loading=!0,T({type:"login",email:e.email}).then(()=>{e.loading=!1,e.tips="60s",e.code="",e.is_send=!0,_()}).catch(s=>{throw e.loading=!1,s}))};return(s,t)=>(B(),E("div",P,[o("div",null,[a(n(x),{to:"/"},{default:c(()=>[a(n(q),{class:"logo",alt:"logo",src:"https://c18e-system-1257416358.cos.na-ashburn.myqcloud.com/image/logo-512x160.png"})]),_:1})]),o("div",U,[o("div",A,[o("h1",null,l(s.$t("login.welcomeBack")),1),o("h3",null,l(s.$t("login.loginaccount")),1),D,O,o("div",R,l(s.$t("login.email")),1),o("div",j,[g(o("input",{placeholder:s.$t("login.emailPlaceholder"),"onUpdate:modelValue":t[0]||(t[0]=d=>e.email=d),type:"text"},null,8,M),[[p,e.email]]),a(n(h),{class:"tips",loading:e.loading,disabled:e.is_send,onClick:w},{default:c(()=>[m(l(e.tips),1)]),_:1},8,["loading","disabled"])]),Y,o("div",F,l(s.$t("login.code")),1),o("div",null,[g(o("input",{placeholder:s.$t("login.codePlaceholder"),"onUpdate:modelValue":t[1]||(t[1]=d=>e.code=d),type:"text"},null,8,G),[[p,e.code]])]),o("div",H,[o("span",{onClick:v},l(s.$t("login.joinNow"))+"? ",1)]),a(n(h),{loading:e.sumbiting,disabled:!(e.code&&e.email),class:"login-btn",style:N({width:e.sumbiting?"60px!important":""}),onClick:y},{default:c(()=>[m(l(s.$t("login.login")),1)]),_:1},8,["loading","disabled","style"])])])]))}};var Q=I(J,[["__scopeId","data-v-afa2d2ac"]]);export{Q as default};
