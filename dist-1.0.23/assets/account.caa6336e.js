import{_ as B,h as C,a4 as M,e as j,G as F,O as N,a1 as S,r as E,o as m,c as v,b as e,t as r,a as x,u as f,w as d,a6 as h,a5 as y,F as $,s as P,a7 as T,I as G,E as O,d as Q,J as R,$ as w,z as q,A as z,a8 as A}from"./index.dd783b7f.js";const o=u=>(q("data-v-5eff28e6"),u=u(),z(),u),H={class:"account"},J={class:"contant"},K={class:"header"},L={style:{"margin-top":"50px"},class:"cell"},W=o(()=>e("label",{for:"nickname"},"\u6635\u79F0:",-1)),X={class:"textfaild"},Z=o(()=>e("div",{class:"tips"},"4\uFF5E30\u4E2A\u5B57\u7B26\uFF0C\u652F\u6301\u4E2D\u82F1\u6587\u3001\u6570\u5B57",-1)),ee={class:"cell"},te=o(()=>e("label",{for:"nickname"},"\u90AE\u7BB1:",-1)),se={class:"textfaild"},ae=o(()=>e("div",{class:"tips"},"\u7B26\u5408\u89C4\u8303\u7684\u90AE\u7BB1",-1)),ne={class:"cell"},oe=o(()=>e("label",{for:"mark"},"\u7B80\u4ECB:",-1)),ie={class:"textfaild"},le=o(()=>e("div",{class:"tips"},"\u7B80\u5355\u4ECB\u7ECD\u4E00\u4E0B\u81EA\u5DF1\u5427\uFF5E1\uFF5E140\u4E2A\u5B57\u7B26",-1)),ce={class:"cell"},de=o(()=>e("label",{for:"my_invite_code"},"\u9080\u8BF7\u7801:",-1)),_e={class:"textfaild"},re=o(()=>e("div",{class:"tips"},"\u9080\u8BF7\u5C0F\u4F19\u4F34\u4E00\u8D77\u6765\u73A9\u800D\u5427\uFF5E",-1)),ue=o(()=>e("h2",{style:{"margin-top":"50px"}},"\u4E2A\u4EBA\u57FA\u672C\u8D44\u6599",-1)),pe={class:"cell"},me=o(()=>e("label",{for:"nickname"},"\u6027\u522B:",-1)),he={class:"textfaild"},ve={class:"textfaild-radio"},fe=o(()=>e("label",{for:"man"},"\u7537",-1)),ge=o(()=>e("label",{for:"woman"},"\u5973",-1)),ke=o(()=>e("div",{class:"tips"},null,-1)),xe=o(()=>e("h2",{style:{"margin-top":"50px"}},"\u8BBE\u5907\u4FE1\u606F",-1)),ye={class:"cell"},we=o(()=>e("label",{for:"nickname"},"\u8BBE\u5907\u4FE1\u606F:",-1)),be={class:"textfaild"},Ue=["title"],Ve={class:"cell"},Ie=o(()=>e("label",{for:"nickname"},"\u4E0A\u6B21\u767B\u5F55IP:",-1)),De={class:"textfaild"},Ye={class:"cell"},Be=o(()=>e("label",{for:"nickname"},"\u4E0A\u6B21\u767B\u5F55\u65F6\u95F4:",-1)),Ce={class:"textfaild"},Me={class:"cell"},je=o(()=>e("label",{for:"nickname"},"\u6CE8\u518C\u65F6\u95F4:",-1)),Fe={class:"textfaild"},Ne=o(()=>e("br",null,null,-1)),Se={__name:"account",setup(u){const p=C(),b=M(),g=j(!1),i=F(()=>p.state.settings.userinfo),t=N({});S(()=>(Object.assign(t,i.value),i.value._id||b.push("login"),i.value));const U=()=>{const s=t.nickname,a=s;i.value.nickname!==s&&a&&_({uid:t._id,nickname:s,username:a})},V=()=>{const s=t.email;i.value.email!==s&&/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(s)&&_({uid:t._id,email:s})},I=()=>{const s=t.description;s&&i.value.description!==s&&_({uid:t._id,description:s})},k=()=>{const s=t.gender;i.value.gender!==s&&_({uid:t._id,gender:s})},D=(s,a)=>{A({function:"logout",token:s}).then(()=>{t.token.splice(a,1),p.dispatch("verifedToken")})},Y=s=>{const[a]=s.target.files;if(a){let l=new FormData;l.append("file",a),T(l).then(({fileList:n})=>{const[{download_url:c}]=n;t.avatar=c,_({uid:t._id,avatar:c})})}},_=s=>{g.value=!0;const{appearance:a,locales:l,spreadflower:n}=p.state.settings;p.dispatch("postUpdateUser",{function:"updateUser",...s,appearance:a,locales:l,spreadflower:n}).then(()=>{g.value=!1}).catch(c=>{throw c})};return(s,a)=>{const l=E("svg-icon");return m(),v("div",H,[e("h1",null,r(s.$t("settings.account")),1),e("div",J,[e("div",K,[x(f(G),{class:"image",animate:"animate__slideInUp",src:t.avatar||"https://tva1.sinaimg.cn/crop.12.0.1217.1217.180/006mNGdajw8fbeqv6matxj30yi0xtacp.jpg?KID=imgbed,tva&Expires=1638551868&ssig=P7hhiHQQFs",alt:t.username},null,8,["src","alt"]),x(l,{class:"icon","icon-class":"plus"}),e("input",{type:"file",class:"file",onChange:Y,accept:"image/*"},null,32)]),e("div",L,[W,e("div",X,[d(e("input",{"onUpdate:modelValue":a[0]||(a[0]=n=>t.nickname=n),name:"nickname",id:"nickname",type:"text",class:"input",onBlur:U},null,544),[[h,t.nickname]]),Z])]),e("div",ee,[te,e("div",se,[d(e("input",{"onUpdate:modelValue":a[1]||(a[1]=n=>t.email=n),name:"email",id:"email",type:"text",class:"input",onBlur:V},null,544),[[h,t.email]]),ae])]),e("div",ne,[oe,e("div",ie,[d(e("input",{"onUpdate:modelValue":a[2]||(a[2]=n=>t.description=n),name:"mark",id:"mark",type:"text",class:"input",onBlur:I},null,544),[[h,t.description]]),le])]),e("div",ce,[de,e("div",_e,[d(e("input",{"onUpdate:modelValue":a[3]||(a[3]=n=>t.my_invite_code=n),name:"my_invite_code",id:"my_invite_code",type:"text",class:"input",readonly:""},null,512),[[h,t.my_invite_code]]),re])]),ue,e("div",pe,[me,e("div",he,[e("div",ve,[d(e("input",{"onUpdate:modelValue":a[4]||(a[4]=n=>t.gender=n),name:"sex",value:1,id:"man",type:"radio",onChange:k},null,544),[[y,t.gender]]),fe,d(e("input",{"onUpdate:modelValue":a[5]||(a[5]=n=>t.gender=n),name:"sex",id:"woman",type:"radio",checked:"",value:2,onChange:k},null,544),[[y,t.gender]]),ge]),ke])]),xe,e("div",ye,[we,e("div",be,[(m(!0),v($,null,P(t.token,(n,c)=>(m(),v("span",{title:n,key:n,class:"tag"},[O(" \u8BBE\u5907"+r(c+1)+" ",1),t.token.length>1?(m(),Q(l,{key:0,class:"icon",title:"\u4E0B\u7EBF",onClick:Ee=>D(n,c),"icon-class":"x"},null,8,["onClick"])):R("",!0)],8,Ue))),128))])]),e("div",Ve,[Ie,e("div",De,[e("span",null,r(t.last_login_ip),1)])]),e("div",Ye,[Be,e("div",Ce,[e("span",null,r(t.last_login_date?f(w)(t.last_login_date).format("YYYY\u5E74MM\u6708DD\u65E5"):""),1)])]),e("div",Me,[je,e("div",Fe,[e("span",null,r(f(w)(t.register_date).format("YYYY\u5E74MM\u6708DD\u65E5")),1)])])]),Ne])}}};var Pe=B(Se,[["__scopeId","data-v-5eff28e6"]]);export{Pe as default};
